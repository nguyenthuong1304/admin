{"version":3,"sources":["webpack:///./src/views/products/edit.vue?e301","webpack:///src/views/products/edit.vue","webpack:///./src/views/products/edit.vue?9605","webpack:///./src/views/products/edit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","product","errors","on","onSubmit","staticRenderFns","components","FormProduct","data","isLoading","mounted","methods","formData","load","loading","updateProduct","then","type","message","name","catch","getProduct","id","fetchProduct","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,QAAUP,EAAIQ,QAAQ,OAASR,EAAIS,QAAQC,GAAG,CAAC,SAAWV,EAAIW,aAAa,IACxOC,EAAkB,G,8HCcP,GACfC,YAAAC,oBACAC,KAFA,WAGA,OACAN,UACAO,aACAR,aAGAS,QATA,WASA,oKACA,eADA,8CAGAC,SACAP,SADA,SACAI,GAAA,8JAGA,SAFAI,EAAA,aACAA,0BACA,EACA,aACAJ,4BAAA,uFACA,+BACAA,4BAAA,gEACA,0BACAA,4BACA,6EAAI,EAAJ,KAAI,EAAJ,KACAI,oEAIAA,iBAfA,OAmBAC,EAAAC,iBAnBA,SAoBAC,+BACAC,MAAA,4BACA,YACAC,eACAC,YAGA,gBAAAC,2BAEAC,OAAA,6BACA,WAAI,EAAJ,OAEA,UACA,sBAjCA,OAqCAP,UArCA,8CAuCAQ,WAxCA,WAwCA,uKACAR,EAAAC,iBACAQ,EAAA,mBAFA,SAGAC,kBAHA,gBAGAf,EAHA,EAGAA,KACA,+BACAK,UALA,gDCnE6V,I,YCOzVW,EAAY,eACd,EACAhC,EACAa,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E","file":"js/chunk-2d0b1a9e.d2a824c8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('FormProduct',{attrs:{\"product\":_vm.product,\"errors\":_vm.errors},on:{\"onSubmit\":_vm.onSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-container\">\n    <FormProduct\n      :product=\"product\"\n      :errors=\"errors\"\n      @onSubmit=\"onSubmit\"\n    />\n  </div>\n</template>\n\n<script>\nimport { updateProduct, fetchProduct } from '@/api/product'\nimport { loading } from '@/utils/index'\nimport FormProduct from './form.vue'\n\nexport default {\n  components: { FormProduct },\n  data() {\n    return {\n      errors: {},\n      isLoading: false,\n      product: {}\n    }\n  },\n  async mounted() {\n    await this.getProduct()\n  },\n  methods: {\n    async onSubmit(data) {\n      const formData = new FormData()\n      formData.append('_method', 'put')\n      for (const key in data) {\n        if (key === 'images') {\n          data[key].forEach((f, idx) => formData.append(`images[${idx}]`, f.raw ?? f.url))\n        } else if (key === 'image_delete_desciptions') {\n          data[key].forEach((url, idx) => formData.append(`image_delete_desciptions[${idx}]`, url))\n        } else if (key === 'product_unit_stocks') {\n          data[key].forEach((s, idx) => {\n            for (const [k, v] of Object.entries(s)) {\n              formData.append(`product_unit_stocks[${idx}][${k}]`, v)\n            }\n          })\n        } else {\n          formData.append(key, data[key])\n        }\n      }\n\n      const load = loading()\n      await updateProduct(this.product.id, formData)\n        .then(({ message }) => {\n          this.$message({\n            type: 'success',\n            message\n          })\n\n          this.$router.push({ name: 'products_index' })\n        })\n        .catch(({ response }) => {\n          const { status, data } = response\n\n          if (status === 422) {\n            this.errors = data.errors\n          }\n        })\n\n      load.close()\n    },\n    async getProduct() {\n      const load = loading()\n      const id = this.$route.params.id\n      const { data } = await fetchProduct(id)\n      this.product = { ...data }\n      load.close()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=6c754078&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}